# my-app

default:
    @just --list

# Build with Nix
build:
    nix build

# Fast local Go build
build-go: build-gomod2nix
    nix develop --command go build -o my-app ./cmd/my-app

# Regenerate gomod2nix.toml
build-gomod2nix:
    nix develop --command gomod2nix

# Update Go dependencies and regenerate gomod2nix.toml
deps:
    nix develop --command go mod tidy
    nix develop --command gomod2nix

# Run tests
test:
    nix develop --command go test ./...

# Run tests with verbose output
test-v:
    nix develop --command go test -v ./...

# Format code
fmt:
    nix develop --command go fmt ./...

# Lint
lint:
    nix develop --command go vet ./...

# Clean build artifacts
clean:
    rm -f my-app
    rm -rf result
